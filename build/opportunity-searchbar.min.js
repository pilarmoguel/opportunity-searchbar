!function(){var e=function(e){var t=null,n=!1,o=!1,i=[];this.get=function(a){o?i.push(a):n?a(t):(o=!0,i.push(a),e(function(e,a){if(e){n=!0,t=a,o=!1;for(var r=0;r<i.length;r++)i[r](t);i=[]}else i=[]}))}},t=function(){return"e316ebe109dd84ed16734e5161a2d236d0a7e6daf499941f7c110078e3c75493"},n=function(e,t,n){if(window.XMLHttpRequest){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4==o.readyState)if(200==o.status){try{var e=JSON.parse(o.responseText)}catch(t){e=void 0,console.error("JSON Error: "+t),n(-1,t)}void 0!=e&&t(e)}else n(o.status)},o.open("GET",e),o.send()}else console.error("XML HTTP Request not available")},o=function(e){var t=5,n=null,o=e.getElementById("destination_suggestions"),a=e.getElementById("destination"),r=e.getElementById("destination_id"),s=null;a.addEventListener("keyup",function(e){r.name="",null!==n&&clearTimeout(n),s=a.value,n=setTimeout(u,300)});var u=function(){var e=s;i.regions.get(function(n){if(e===s){for(var o=[],a=0;a<n.length&&o.length<=t;a++)n[a].name.toLowerCase().indexOf(e.toLowerCase())>-1&&o.push({id:n[a].id,name:n[a].name,type:"regions",human:"Region"});o.length==t?d(e,o):i.home_mcs.get(function(n){if(e===s){for(var i=0;i<n.length&&o.length<=t;i++)n[i].name.toLowerCase().indexOf(e.toLowerCase())>-1&&o.push({id:n[i].id,name:n[i].name,type:"home_mcs",human:"Country"});d(e,o)}})}})},d=function(e,t){if(e===s){for(var n="<ul>",i=0;i<t.length;i++)n+='<li data-type="'+t[i].type+'" data-id="'+t[i].id+'">'+t[i].name+" ("+t[i].human+")</li>";n+="</ul>",o.innerHTML=n;for(var a=o.getElementsByTagName("li"),i=0;i<a.length;i++)a[i].addEventListener("click",l);o.style.display="block"}},l=function(e){o.style.display="none",a.value=e.target.innerText,r.name=e.target.dataset.type+"[]",r.value=e.target.dataset.id}},i={regions:new e(function(e){var o="https://gis-api.aiesec.org:443/v2/lists/regions.json?access_token="+t();n(o,function(t){e(!0,t)},function(t){console.error("Could not load regions. Code: "+t),e(!1)})}),home_mcs:new e(function(e){var o="https://gis-api.aiesec.org:443/v2/lists/mcs.json?access_token="+t();n(o,function(t){e(!0,t)},function(t){console.error("Could not load MCs. Code: "+t),e(!1)})})},a='<form action="https://opportunities.aiesec.org/programmes/GCDP"><select id="programme" required><option value="GCDP">Volunteer Abroad</option><option value="GIP">Intern Abroad</option><option value="TMP+TLP">Join in Campus</option></select><input name="earliest_start_date" type="date" required/><input id="destination" type="text" autocomplete="off" /><input id="destination_id" type="hidden" /><div id="destination_suggestions" style="display: none;"></div><input type="submit" value="Search" /></form>',r=function(e){e.getElementById("programme").addEventListener("change",function(e){e.target.form.action="https://opportunities.aiesec.org/programmes/"+e.target.value})},s=function(){var e=Object.create(HTMLElement.prototype);return e.createdCallback=function(){var e=this.createShadowRoot();e.innerHTML=a;new r(e),new o(e)},document.registerElement("opportunity-searchbar",{prototype:e})};"registerElement"in document?s():alert("Your browser is not yet supported or maybe not anymore. It seems like it doesn't support HTML5 so the best thing to do is to update your browser.")}();